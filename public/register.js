// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var submitCredentials, text1, text2, text3,
      _this = this;
    $.fn.spin = function(opts, color, content) {
      var presets;
      presets = {
        tiny: {
          lines: 8,
          length: 2,
          width: 2,
          radius: 3
        },
        small: {
          lines: 8,
          length: 1,
          width: 2,
          radius: 5
        },
        large: {
          lines: 10,
          length: 8,
          width: 4,
          radius: 8
        }
      };
      if (Spinner) {
        return this.each(function() {
          var $this, spinner;
          $this = $(this);
          $this.html("&nbsp;");
          spinner = $this.data("spinner");
          if (spinner != null) {
            spinner.stop();
            $this.data("spinner", null);
            return $this.html(content);
          } else if (opts !== false) {
            if (typeof opts === "string") {
              if (opts in presets) {
                opts = presets[opts];
              } else {
                opts = {};
              }
              if (color) {
                opts.color = color;
              }
            }
            spinner = new Spinner($.extend({
              color: $this.css("color")
            }, opts));
            spinner.spin(this);
            return $this.data("spinner", spinner);
          }
        });
      } else {
        console.log("Spinner class not available.");
        return null;
      }
    };
    submitCredentials = function() {
      $('.loading').spin('small');
      return client.post("register/", {
        password: $('#password-input').val(),
        email: $('#email-input').val()
      }, {
        success: function() {
          $('.loading').spin();
          $('.alert-success').fadeIn();
          return setTimeout(function() {
            var _this = this;
            return $("body").fadeOut(function() {
              return setTimeout(function() {
                return window.location = "/";
              }, 500);
            });
          }, 2000);
        },
        error: function(err) {
          var msg;
          $('.loading').spin();
          msg = JSON.parse(err.responseText).msg;
          $('.alert-error').html(msg);
          return $('.alert-error').fadeIn();
        }
      });
    };
    text1 = 'Welcome to your Cozy!';
    text2 = "It's the first time you connect,";
    text3 = "Before going further I need you to give me:";
    $('h1').hide();
    $('input').hide();
    $($('h1')[0]).fadeIn(1500);
    setTimeout(function() {
      return $($('h1')[1]).fadeIn(1500);
    }, 500);
    setTimeout(function() {
      return $($('h1')[2]).fadeIn(1500);
    }, 1000);
    setTimeout(function() {
      return $('#email-input').fadeIn(1500);
    }, 1500);
    setTimeout(function() {
      return $('#password-input').fadeIn(1500);
    }, 2000);
    $('#email-input').keyup(function(event) {
      if (event.which === 13) {
        return $('#password-input').focus();
      }
    });
    $('#password-input').keyup(function(event) {
      if (event.which === 13) {
        return submitCredentials();
      }
    });
    return $('#email-input').focus();
  });

}).call(this);
