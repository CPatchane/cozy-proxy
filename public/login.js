// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var submitPassword;
    submitPassword = function() {
      return client.post("login/", {
        password: $('#password-input').val()
      }, {
        success: function() {
          $('.alert-error').fadeOut();
          $('#forgot-password').hide();
          $('.alert-success').fadeIn();
          $('.alert-success').html("Sign in succeeded");
          return window.location = "/";
        },
        error: function(err) {
          var msg;
          $('.alert-success').fadeOut();
          msg = JSON.parse(err.responseText).msg;
          $('.alert-error').html(msg);
          $('.alert-error').fadeIn();
          return $('#forgot-password').fadeIn();
        }
      });
    };
    $('#password-input').keyup(function(event) {
      if (event.which === 13) {
        return submitPassword();
      }
    });
    $('#password-input').focus();
    return $('#forgot-password').click(function(event) {
      return client.post("login/forgot", {}, {
        success: function() {
          $('.alert-error').fadeOut();
          $('.alert-success').fadeIn();
          return $('.alert-success').html("An email have been sent to your mailbox, " + "follow its instructions to get a new password");
        },
        error: function(err) {
          var msg;
          $('.alert-success').fadeOut();
          msg = JSON.parse(err.responseText).msg;
          $('.alert-error').html(msg);
          return $('.alert-error').fadeIn();
        }
      });
    });
  });

}).call(this);
